# üé® –î–∏–∑–∞–π–Ω–µ—Ä—Å–∫–∏–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç—ã Atlas of Life

–≠—Ç–æ—Ç —Ñ–∞–π–ª —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ—á–Ω—ã–µ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ –¥–∏–∑–∞–π–Ω–∞ –≤—Å–µ—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –≤ —Å–ª—É—á–∞–µ —Å–±–æ–µ–≤.

---

## üìã –û–±—â–∏–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã –¥–∏–∑–∞–π–Ω–∞

### –¶–≤–µ—Ç–æ–≤–∞—è —Å—Ö–µ–º–∞
- **–§–æ–Ω**: —Ç–µ–º–Ω—ã–π –∫–æ—Å–º–∏—á–µ—Å–∫–∏–π (#0a0a0a, #1a1a2e)
- **–ê–∫—Ü–µ–Ω—Ç—ã**: –∫–æ—Å–º–∏—á–µ—Å–∫–∏–µ —Ü–≤–µ—Ç–∞ (—Å–∏–Ω–∏–π, —Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–π, –±–∏—Ä—é–∑–æ–≤—ã–π)
- **–¢–µ–∫—Å—Ç**: –±–µ–ª—ã–π (#ffffff) —Å –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å—é –¥–ª—è –∏–µ—Ä–∞—Ä—Ö–∏–∏
- **–ì—Ä–∞–Ω–∏—Ü—ã**: –∫–æ–Ω—Ç—Ä–∞—Å—Ç–Ω—ã–µ —Ü–≤–µ—Ç–∞, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥–±–∏—Ä–∞–µ–º—ã–µ

### –°—Ç–∏–ª—å —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞
- **–û—Å–Ω–æ–≤–Ω–æ–π —Å—Ç–∏–ª—å**: `projectVisualStyle = 'original'`
- **3D —ç—Ñ—Ñ–µ–∫—Ç—ã**: —Ä–∞–¥–∏–∞–ª—å–Ω—ã–µ –≥—Ä–∞–¥–∏–µ–Ω—Ç—ã, –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ —Å–≤–µ—á–µ–Ω–∏–µ
- **–ê–Ω–∏–º–∞—Ü–∏–∏**: –ø–ª–∞–≤–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã, –ø—É–ª—å—Å–∞—Ü–∏—è –¥–ª—è –∞–∫—Ç–∏–≤–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
- **–ì–ª—É–±–∏–Ω–∞**: —Ç–µ–Ω–∏, –≤–Ω–µ—à–Ω–∏–µ —Å–≤–µ—á–µ–Ω–∏—è, –º–Ω–æ–≥–æ—Å–ª–æ–π–Ω–æ—Å—Ç—å

---

## üåå –î–æ–º–µ–Ω—ã (Galaxies)

### –í–∏–∑—É–∞–ª—å–Ω—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏
- **–§–æ—Ä–º–∞**: –∫—Ä—É–≥ —Å —Ä–∞–¥–∏–∞–ª—å–Ω—ã–º –≥—Ä–∞–¥–∏–µ–Ω—Ç–æ–º
- **–ì—Ä–∞–Ω–∏—Ü–∞**: –ø—É–Ω–∫—Ç–∏—Ä–Ω–∞—è –ª–∏–Ω–∏—è (4px dash, 4px gap)
- **–†–∞–∑–º–µ—Ä**: –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π (–º–∏–Ω–∏–º—É–º 80px, —Ä–∞—Å—Ç—è–≥–∏–≤–∞–µ—Ç—Å—è –ø–æ–¥ –ø—Ä–æ–µ–∫—Ç—ã)
- **–¶–≤–µ—Ç**: –ø–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—é –¥–æ–º–µ–Ω–∞ (`n.color`)

### –ö–æ–¥ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞
```javascript
// –†–∞–¥–∏–∞–ª—å–Ω—ã–π –≥—Ä–∞–¥–∏–µ–Ω—Ç
const gradient = ctx.createRadialGradient(n.x, n.y, 0, n.x, n.y, n.r);
gradient.addColorStop(0, domainColor + "40");
gradient.addColorStop(0.7, domainColor + "20");
gradient.addColorStop(1, domainColor + "10");

// –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ
ctx.fillStyle = gradient;
ctx.arc(n.x, n.y, n.r, 0, Math.PI * 2);
ctx.fill();

// –ü—É–Ω–∫—Ç–∏—Ä–Ω–∞—è –≥—Ä–∞–Ω–∏—Ü–∞
ctx.strokeStyle = domainColor;
ctx.lineWidth = 1.2 * DPR;
ctx.setLineDash([4 * DPR, 4 * DPR]);
ctx.arc(n.x, n.y, n.r, 0, Math.PI * 2);
ctx.stroke();
ctx.setLineDash([]);
```

---

## ü™ê –ü—Ä–æ–µ–∫—Ç—ã (Orbits)

### –í–∏–∑—É–∞–ª—å–Ω—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏
- **–§–æ—Ä–º–∞**: –ø—Ä–æ—Å—Ç–æ–π –∫—Ä—É–≥
- **–ì—Ä–∞–Ω–∏—Ü–∞**: —Ç–æ–Ω–∫–∞—è –∫–æ–Ω—Ç—Ä–∞—Å—Ç–Ω–∞—è –ª–∏–Ω–∏—è
- **–†–∞–∑–º–µ—Ä**: –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π (–º–∏–Ω–∏–º—É–º 40px, —Ä–∞—Å—Ç—è–≥–∏–≤–∞–µ—Ç—Å—è –ø–æ–¥ –∑–∞–¥–∞—á–∏)
- **–¶–≤–µ—Ç**: –ø–æ —Ç–∏–ø—É –ø—Ä–æ–µ–∫—Ç–∞

### –ö–æ–¥ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞
```javascript
// –û—Å–Ω–æ–≤–Ω–æ–π –∫—Ä—É–≥
ctx.beginPath();
ctx.fillStyle = projectColor;
ctx.arc(n.x, n.y, pulseRadius, 0, Math.PI * 2);
ctx.fill();

// –¢–æ–Ω–∫–∞—è –≥—Ä–∞–Ω–∏—Ü–∞
ctx.beginPath();
ctx.strokeStyle = getContrastColor(projectColor);
ctx.lineWidth = 1 * DPR;
ctx.arc(n.x, n.y, pulseRadius, 0, Math.PI * 2);
ctx.stroke();
```

---

## ‚≠ê –ó–∞–¥–∞—á–∏ (Planets)

### –í–∏–∑—É–∞–ª—å–Ω—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏
- **–§–æ—Ä–º–∞**: –∫—Ä—É–≥ —Å 3D —ç—Ñ—Ñ–µ–∫—Ç–∞–º–∏
- **–†–∞–∑–º–µ—Ä**: 12-24px (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞)
- **–ì—Ä–∞–¥–∏–µ–Ω—Ç**: —Ä–∞–¥–∏–∞–ª—å–Ω—ã–π –æ—Ç —Å–≤–µ—Ç–ª–æ–≥–æ –∫ —Ç–µ–º–Ω–æ–º—É
- **–í–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ —Å–≤–µ—á–µ–Ω–∏–µ**: –±–µ–ª–æ–µ –ø—è—Ç–Ω–æ –¥–ª—è –æ–±—ä–µ–º–Ω–æ—Å—Ç–∏
- **–í–Ω–µ—à–Ω–µ–µ —Å–≤–µ—á–µ–Ω–∏–µ**: —Ç–æ–Ω–∫–æ–µ —Å–≤–µ—á–µ–Ω–∏–µ –¥–ª—è –≥–ª—É–±–∏–Ω—ã
- **–ì—Ä–∞–Ω–∏—Ü–∞**: –∫–æ–Ω—Ç—Ä–∞—Å—Ç–Ω–∞—è, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥–±–∏—Ä–∞–µ–º–∞—è

### –ö–æ–¥ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞
```javascript
// –£–ª—É—á—à–µ–Ω–Ω—ã–π –≥—Ä–∞–¥–∏–µ–Ω—Ç
const gradient = ctx.createRadialGradient(n.x - n.r/2, n.y - n.r/2, 0, n.x, n.y, n.r);
gradient.addColorStop(0, baseColor + "FF");
gradient.addColorStop(0.3, baseColor + "DD");
gradient.addColorStop(0.7, baseColor + "AA");
gradient.addColorStop(1, baseColor + "77");

// –û—Å–Ω–æ–≤–Ω–æ–π –∫—Ä—É–≥
ctx.beginPath();
ctx.arc(n.x, n.y, n.r, 0, Math.PI * 2);
ctx.fillStyle = gradient;
ctx.fill();

// –í–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ —Å–≤–µ—á–µ–Ω–∏–µ –¥–ª—è 3D —ç—Ñ—Ñ–µ–∫—Ç–∞
const innerGradient = ctx.createRadialGradient(n.x - n.r/3, n.y - n.r/3, 0, n.x, n.y, n.r * 0.6);
innerGradient.addColorStop(0, "#ffffff40");
innerGradient.addColorStop(1, "#00000000");

ctx.beginPath();
ctx.fillStyle = innerGradient;
ctx.arc(n.x, n.y, n.r * 0.6, 0, Math.PI * 2);
ctx.fill();

// –ö–æ–Ω—Ç—Ä–∞—Å—Ç–Ω–∞—è –≥—Ä–∞–Ω–∏—Ü–∞
ctx.beginPath();
ctx.strokeStyle = getContrastColor(baseColor);
ctx.lineWidth = 1.5 * DPR;
ctx.arc(n.x, n.y, n.r, 0, Math.PI * 2);
ctx.stroke();

// –í–Ω–µ—à–Ω–µ–µ —Å–≤–µ—á–µ–Ω–∏–µ –¥–ª—è –≥–ª—É–±–∏–Ω—ã
ctx.beginPath();
ctx.strokeStyle = baseColor + "30";
ctx.lineWidth = 3 * DPR;
ctx.arc(n.x, n.y, n.r + 1 * DPR, 0, Math.PI * 2);
ctx.stroke();
```

### –°—Ç–∞—Ç—É—Å-—ç—Ñ—Ñ–µ–∫—Ç—ã
- **"today"**: –∂–µ–ª—Ç–æ–µ –∫–æ–ª—å—Ü–æ (#f59e0b, 2px)
- **"doing"**: –ø—É–ª—å—Å–∏—Ä—É—é—â–µ–µ –∫–æ–ª—å—Ü–æ
- **hover**: –±–µ–ª–æ–µ –∫–æ–ª—å—Ü–æ (2px)
- **click**: —ç—Ñ—Ñ–µ–∫—Ç –∑–≤–µ–∑–¥–æ—á–∫–∏ (8 –ª—É—á–µ–π)

---

## üí´ –ò–¥–µ–∏ (Nebulae)

### –í–∏–∑—É–∞–ª—å–Ω—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏
- **–§–æ—Ä–º–∞**: –∫—Ä—É–≥ —Å –º–Ω–æ–≥–æ—Å–ª–æ–π–Ω—ã–º —ç—Ñ—Ñ–µ–∫—Ç–æ–º
- **–ì—Ä–∞–¥–∏–µ–Ω—Ç**: —Ä–∞–¥–∏–∞–ª—å–Ω—ã–π —Å –±–ª–∏–∫–∞–º–∏
- **–†–∞–∑–º–µ—Ä**: 15px –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- **–ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å**: 0.6-0.8

### –ö–æ–¥ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞
```javascript
// –ú–Ω–æ–≥–æ—Å–ª–æ–π–Ω—ã–π –≥—Ä–∞–¥–∏–µ–Ω—Ç
const gradient = ctx.createRadialGradient(n.x, n.y, 0, n.x, n.y, n.r);
gradient.addColorStop(0, ideaColor + "CC");
gradient.addColorStop(0.5, ideaColor + "66");
gradient.addColorStop(1, ideaColor + "22");

ctx.beginPath();
ctx.fillStyle = gradient;
ctx.arc(n.x, n.y, n.r, 0, Math.PI * 2);
ctx.fill();
```

---

## ü™® –ó–∞–º–µ—Ç–∫–∏ (Asteroids)

### –í–∏–∑—É–∞–ª—å–Ω—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏
- **–§–æ—Ä–º–∞**: –∫—Ä—É–≥ —Å –æ–±—ä–µ–º–Ω—ã–º –≥—Ä–∞–¥–∏–µ–Ω—Ç–æ–º
- **–†–∞–∑–º–µ—Ä**: 12px –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- **–¢–µ–Ω—å**: –¥–ª—è –≥–ª—É–±–∏–Ω—ã
- **–°—Ç–∞–±–∏–ª—å–Ω–∞—è —Ñ–æ—Ä–º–∞**: –±–µ–∑ –ø—É–ª—å—Å–∞—Ü–∏–∏

### –ö–æ–¥ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞
```javascript
// –û–±—ä–µ–º–Ω—ã–π –≥—Ä–∞–¥–∏–µ–Ω—Ç
const gradient = ctx.createRadialGradient(n.x - n.r/3, n.y - n.r/3, 0, n.x, n.y, n.r);
gradient.addColorStop(0, noteColor + "DD");
gradient.addColorStop(0.7, noteColor + "88");
gradient.addColorStop(1, noteColor + "44");

ctx.beginPath();
ctx.fillStyle = gradient;
ctx.arc(n.x, n.y, n.r, 0, Math.PI * 2);
ctx.fill();
```

---

## üéØ –≠—Ñ—Ñ–µ–∫—Ç—ã –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è

### Hover —ç—Ñ—Ñ–µ–∫—Ç—ã
- **–ó–∞–¥–∞—á–∏**: –±–µ–ª–æ–µ –∫–æ–ª—å—Ü–æ (2px, #ffffff)
- **–ü—Ä–æ–µ–∫—Ç—ã**: —É–≤–µ–ª–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –Ω–∞ 10%
- **–î–æ–º–µ–Ω—ã**: —É—Å–∏–ª–µ–Ω–∏–µ —Å–≤–µ—á–µ–Ω–∏—è

### Click —ç—Ñ—Ñ–µ–∫—Ç—ã
- **–ó–∞–¥–∞—á–∏**: —ç—Ñ—Ñ–µ–∫—Ç –∑–≤–µ–∑–¥–æ—á–∫–∏ (8 –±–µ–ª—ã—Ö –ª—É—á–µ–π)
- **–ü—Ä–æ–µ–∫—Ç—ã**: –ø—É–ª—å—Å–∏—Ä—É—é—â–µ–µ –∫–æ–ª—å—Ü–æ
- **–î–æ–º–µ–Ω—ã**: –≤–æ–ª–Ω–æ–≤–æ–π —ç—Ñ—Ñ–µ–∫—Ç

### –ê–Ω–∏–º–∞—Ü–∏–∏
- **–ü—É–ª—å—Å–∞—Ü–∏—è**: –¥–ª—è —Å—Ç–∞—Ç—É—Å–∞ "doing" (sin –≤–æ–ª–Ω–∞)
- **–ó–∞—Ç—É—Ö–∞–Ω–∏–µ**: –¥–ª—è click —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ (0.8s)
- **–ü–ª–∞–≤–Ω–æ—Å—Ç—å**: –≤—Å–µ –ø–µ—Ä–µ—Ö–æ–¥—ã —Å easing

---

## üìè –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã

### –ü—Ä–æ–µ–∫—Ç—ã
```javascript
function calculateProjectRadius(tasks) {
  const baseRadius = 32 * DPR;
  if (tasks.length === 0) return baseRadius;
  
  const maxTaskSize = Math.max(...tasks.map(task => sizeByImportance(task) * DPR));
  const taskCount = tasks.length;
  const minDist = maxTaskSize * 2.2 + 10 * DPR;
  
  // –î–ª—è –Ω–µ–±–æ–ª—å—à–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∑–∞–¥–∞—á
  if (taskCount <= 3) {
    return Math.max(baseRadius, maxTaskSize * 2.5 + 16 * DPR);
  }
  
  // –î–ª—è –±–æ–ª—å—à–µ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ - –∫–æ–ª—å—Ü–µ–≤–∞—è —É–ø–∞–∫–æ–≤–∫–∞
  const maxTasksPerRing = 8;
  const ringsNeeded = Math.ceil(taskCount / maxTasksPerRing);
  // ... —Ä–∞—Å—á–µ—Ç —Ä–∞–¥–∏—É—Å–∞
}
```

### –î–æ–º–µ–Ω—ã
```javascript
function calculateDomainRadius(projects) {
  const baseRadius = 80 * DPR;
  if (projects.length === 0) return baseRadius;
  
  const maxProjectSize = Math.max(...projects.map(project => project.r || 40 * DPR));
  const projectCount = projects.length;
  
  // –î–ª—è –Ω–µ–±–æ–ª—å—à–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø—Ä–æ–µ–∫—Ç–æ–≤
  if (projectCount <= 2) {
    return Math.max(baseRadius, maxProjectSize * 2.0 + 32 * DPR);
  }
  
  // –î–ª—è –±–æ–ª—å—à–µ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ - –ø–æ –ø–ª–æ—â–∞–¥–∏
  const totalProjectArea = projects.reduce((sum, project) => {
    const projectSize = project.r || 40 * DPR;
    return sum + Math.PI * projectSize * projectSize;
  }, 0);
  
  const areaWithPadding = totalProjectArea * 1.5;
  const radiusFromArea = Math.sqrt(areaWithPadding / Math.PI) + 32 * DPR;
  
  return Math.max(baseRadius, radiusFromArea);
}
```

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

### DPR (Device Pixel Ratio)
- –í—Å–µ —Ä–∞–∑–º–µ—Ä—ã —É–º–Ω–æ–∂–∞—é—Ç—Å—è –Ω–∞ `DPR` –¥–ª—è —á–µ—Ç–∫–æ—Å—Ç–∏
- `const DPR = window.devicePixelRatio || 1;`

### –¶–≤–µ—Ç–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- `getContrastColor(color)` - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–¥–±–æ—Ä –∫–æ–Ω—Ç—Ä–∞—Å—Ç–Ω–æ–≥–æ —Ü–≤–µ—Ç–∞
- `colorByAging(aging)` - —Ü–≤–µ—Ç –ø–æ –≤–æ–∑—Ä–∞—Å—Ç—É –æ–±—ä–µ–∫—Ç–∞
- `colorByStatus(status)` - —Ü–≤–µ—Ç –ø–æ —Å—Ç–∞—Ç—É—Å—É

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- **Culling**: –æ—Ç—Ä–∏—Å–æ–≤–∫–∞ —Ç–æ–ª—å–∫–æ –≤–∏–¥–∏–º—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤
- **Throttling**: –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —á–∞—Å—Ç–æ—Ç—ã –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
- **RAF**: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ requestAnimationFrame

---

## üö® –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### –ü–æ—Ä—è–¥–æ–∫ –æ—Ç—Ä–∏—Å–æ–≤–∫–∏ (–≤–∞–∂–Ω–æ!)
1. –î–æ–º–µ–Ω—ã (—Ñ–æ–Ω)
2. –ü—Ä–æ–µ–∫—Ç—ã (—Å—Ä–µ–¥–Ω–∏–π –ø–ª–∞–Ω)
3. –ó–∞–¥–∞—á–∏ (–ø–µ—Ä–µ–¥–Ω–∏–π –ø–ª–∞–Ω)
4. –≠—Ñ—Ñ–µ–∫—Ç—ã –∫–ª–∏–∫–∞ (–ø–æ–≤–µ—Ä—Ö –≤—Å–µ–≥–æ)

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è
- `clickedNodeId` - ID –∫–ª–∏–∫–Ω—É—Ç–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞
- `clickEffectTime` - –≤—Ä–µ–º—è —ç—Ñ—Ñ–µ–∫—Ç–∞ –∫–ª–∏–∫–∞ (0-1)
- `hoverNodeId` - ID –æ–±—ä–µ–∫—Ç–∞ –ø–æ–¥ –∫—É—Ä—Å–æ—Ä–æ–º

### –§–∞–π–ª—ã –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
- `js/view_map.js` - –æ—Å–Ω–æ–≤–Ω–æ–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥
- `js/state.js` - —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–∑–º–µ—Ä–æ–≤ –∏ —Ü–≤–µ—Ç–æ–≤
- `styles.css` - CSS —Å—Ç–∏–ª–∏

---

## üìù –ë—ã—Å—Ç—Ä–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ

### –ï—Å–ª–∏ —Å–ª–æ–º–∞–ª—Å—è –¥–∏–∑–∞–π–Ω:
1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `projectVisualStyle = 'original'`
2. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–æ–¥ –∏–∑ —ç—Ç–æ–≥–æ —Ñ–∞–π–ª–∞
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—Ä—è–¥–æ–∫ –æ—Ç—Ä–∏—Å–æ–≤–∫–∏
4. –£–±–µ–¥–∏—Ç—å—Å—è –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö

### –ï—Å–ª–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç —ç—Ñ—Ñ–µ–∫—Ç—ã:
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å `clickedNodeId` –∏ `clickEffectTime`
2. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —ç—Ñ—Ñ–µ–∫—Ç—ã —Ä–∏—Å—É—é—Ç—Å—è –≤ –∫–æ–Ω—Ü–µ
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏–∫—É `isClicked`

### –ï—Å–ª–∏ –æ–±—ä–µ–∫—Ç—ã –Ω–µ –∞–¥–∞–ø—Ç–∏—Ä—É—é—Ç—Å—è:
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ `calculateProjectRadius` –∏ `calculateDomainRadius`
2. –£–±–µ–¥–∏—Ç—å—Å—è –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ `sizeByImportance`
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–æ–≤ –≤ `layoutMap`

---

## üéõÔ∏è –ü–∞–Ω–µ–ª–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

### Header (–í–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å)
- **–§–æ–Ω**: `var(--panel)` (#0f1624)
- **–í—ã—Å–æ—Ç–∞**: 56px (min-height: 48px)
- **–ì—Ä–∞–Ω–∏—Ü–∞**: `border-bottom: 1px solid var(--panel-2)`
- **–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ**: `display: flex; align-items: center; gap: 8px; padding: 0 10px`

### Brand (–õ–æ–≥–æ—Ç–∏–ø)
- **–ì—Ä–∞–¥–∏–µ–Ω—Ç**: `linear-gradient(45deg, #ff6b6b, #4ecdc4)`
- **–°—Ç–∏–ª—å**: `-webkit-background-clip: text; -webkit-text-fill-color: transparent`
- **–®—Ä–∏—Ñ—Ç**: `font-weight: 700; letter-spacing: .3px`
- **–†–∞–∑–º–µ—Ä**: `max-width: 200px`

### Main Layout (–û—Å–Ω–æ–≤–Ω–∞—è —Å–µ—Ç–∫–∞)
- **–°—Ç—Ä—É–∫—Ç—É—Ä–∞**: `grid-template-rows: 56px 1fr 56px`
- **–ë–æ–∫–æ–≤—ã–µ –ø–∞–Ω–µ–ª–∏**: `grid-template-columns: minmax(200px, 250px) 1fr minmax(250px, 300px)`
- **–õ–µ–≤–∞—è –ø–∞–Ω–µ–ª—å**: `background: var(--panel); border-right: 1px solid var(--panel-2)`
- **–ü—Ä–∞–≤–∞—è –ø–∞–Ω–µ–ª—å**: `background: var(--panel); border-left: 1px solid var(--panel-2)`

### Inspector (–ü—Ä–∞–≤–∞—è –ø–∞–Ω–µ–ª—å)
- **–û—Ç—Å—Ç—É–ø—ã**: `padding: 12px`
- **–ü–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–µ**: `overflow: auto; word-wrap: break-word`
- **–ó–∞–≥–æ–ª–æ–≤–∫–∏**: `font-size: 16px; margin: 0 0 6px 0`
- **–ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ**: `color: var(--muted); font-size: 12px`

### Footer (–ù–∏–∂–Ω—è—è –ø–∞–Ω–µ–ª—å)
- **–í—ã—Å–æ—Ç–∞**: 56px
- **–§–æ–Ω**: `var(--panel)`
- **–ì—Ä–∞–Ω–∏—Ü–∞**: `border-top: 1px solid var(--panel-2)`
- **–§—É–Ω–∫—Ü–∏—è**: –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–∞—è –ø–∞–Ω–µ–ª—å (–Ω–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á)

---

## üîò –ö–Ω–æ–ø–∫–∏ –∏ —ç–ª–µ–º–µ–Ω—Ç—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ (.btn)
- **–û—Ç—Å—Ç—É–ø—ã**: `padding: 6px 10px`
- **–†–∞–¥–∏—É—Å**: `border-radius: 8px`
- **–ì—Ä–∞–Ω–∏—Ü–∞**: `border: 1px solid var(--panel-2)`
- **–§–æ–Ω**: `background: var(--panel-2)`
- **–¶–≤–µ—Ç**: `color: var(--text)`
- **–ü–µ—Ä–µ—Ö–æ–¥**: `transition: all 0.2s ease`
- **–®—Ä–∏—Ñ—Ç**: `font-size: 12px`

### Hover —ç—Ñ—Ñ–µ–∫—Ç—ã
- **–§–æ–Ω**: `background: var(--accent)`
- **–¶–≤–µ—Ç**: `color: var(--bg)`
- **–¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è**: `transform: translateY(-1px)`
- **–¢–µ–Ω—å**: `box-shadow: 0 4px 12px rgba(0,0,0,0.3)`

### –¢–∏–ø—ã –∫–Ω–æ–ø–æ–∫
- **Primary**: `background: var(--accent); border-color: var(--accent); color: var(--bg)`
- **Danger**: `background: var(--danger); border-color: var(--danger); color: var(--bg)`
- **Warn**: `background: var(--warn); border-color: var(--warn); color: var(--bg)`
- **OK**: `background: var(--ok); border-color: var(--ok); color: var(--bg)`

### –ö–Ω–æ–ø–∫–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∏–¥–µ–π/–∑–∞–º–µ—Ç–æ–∫
- **–ò–¥–µ–∏**: `background: linear-gradient(135deg, #4ecdc4, #44a08d)`
- **–ó–∞–º–µ—Ç–∫–∏**: `background: linear-gradient(135deg, #8b7355, #6c757d)`
- **–†–∞–∑–º–µ—Ä**: `padding: 8px 12px; font-size: 16px`
- **–†–∞–¥–∏—É—Å**: `border-radius: 6px`

### –°—Ç–∞—Ç—É—Å–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ (.status-buttons)
- **–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ**: `display: flex; gap: 4px; flex-wrap: wrap`
- **–†–∞–∑–º–µ—Ä**: `min-width: 60px; font-size: 12px; padding: 4px 8px`
- **–¶–≤–µ—Ç–∞ —Å—Ç–∞—Ç—É—Å–æ–≤**:
  - **Backlog**: `#9ca3af` (—Å–µ—Ä—ã–π)
  - **Today**: `#f59e0b` (–∂–µ–ª—Ç—ã–π)
  - **Doing**: `#60a5fa` (—Å–∏–Ω–∏–π)
  - **Done**: `#059669` (–∑–µ–ª–µ–Ω—ã–π)

### –ú–∞–ª–µ–Ω—å–∫–∏–µ –∫–Ω–æ–ø–∫–∏ (.btn-small)
- **–†–∞–∑–º–µ—Ä**: `min-width: 28px; height: 28px`
- **–®—Ä–∏—Ñ—Ç**: `font-size: 12px`
- **–í—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ**: `display: flex; align-items: center; justify-content: center`
- **Hover**: `transform: scale(1.1); opacity: 0.9`

---

## üé® –¶–≤–µ—Ç–æ–≤–∞—è —Å—Ö–µ–º–∞ (CSS –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ)

### –¢–µ–º–Ω–∞—è —Ç–µ–º–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
```css
:root {
  --bg: #0b0f17;           /* –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–æ–Ω */
  --panel: #0f1624;        /* –§–æ–Ω –ø–∞–Ω–µ–ª–µ–π */
  --panel-2: #111a2a;      /* –í—Ç–æ—Ä–∏—á–Ω—ã–π —Ñ–æ–Ω */
  --text: #e6edf3;         /* –û—Å–Ω–æ–≤–Ω–æ–π —Ç–µ–∫—Å—Ç */
  --muted: #9db1c9;        /* –ü—Ä–∏–≥–ª—É—à–µ–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç */
  --accent: #56ccf2;       /* –ê–∫—Ü–µ–Ω—Ç–Ω—ã–π —Ü–≤–µ—Ç */
  --warn: #f2c94c;         /* –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ */
  --danger: #ff6b6b;       /* –û–ø–∞—Å–Ω–æ—Å—Ç—å */
  --ok: #19c37d;           /* –£—Å–ø–µ—Ö */
  --link: #7f9cf5;         /* –°—Å—ã–ª–∫–∏ */
  --home: #2dd4bf;         /* –î–æ–º */
  --dacha: #f59e0b;        /* –î–∞—á–∞ */
}
```

### –°–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞
```css
[data-theme="light"] {
  --bg: #f7fafc;           /* –°–≤–µ—Ç–ª—ã–π —Ñ–æ–Ω */
  --panel: #ffffff;        /* –ë–µ–ª—ã–µ –ø–∞–Ω–µ–ª–∏ */
  --panel-2: #f2f6fb;      /* –°–≤–µ—Ç–ª–æ-—Å–µ—Ä—ã–π */
  --text: #0b1220;          /* –¢–µ–º–Ω—ã–π —Ç–µ–∫—Å—Ç */
  --muted: #6b7a90;         /* –ü—Ä–∏–≥–ª—É—à–µ–Ω–Ω—ã–π */
  --accent: #2563eb;        /* –°–∏–Ω–∏–π –∞–∫—Ü–µ–Ω—Ç */
  --warn: #b7791f;          /* –û—Ä–∞–Ω–∂–µ–≤—ã–π */
  --danger: #d14343;        /* –ö—Ä–∞—Å–Ω—ã–π */
  --ok: #059669;            /* –ó–µ–ª–µ–Ω—ã–π */
  --link: #3b82f6;          /* –°–∏–Ω–∏–µ —Å—Å—ã–ª–∫–∏ */
}
```

---

## üìù –§–æ—Ä–º—ã –∏ –ø–æ–ª—è –≤–≤–æ–¥–∞

### –ü–æ–ª—è –≤–≤–æ–¥–∞ (.form-input, .form-textarea)
- **–§–æ–Ω**: `background: rgba(255, 255, 255, 0.05)`
- **–ì—Ä–∞–Ω–∏—Ü–∞**: `border: 1px solid rgba(255, 255, 255, 0.2)`
- **–†–∞–¥–∏—É—Å**: `border-radius: 8px`
- **–û—Ç—Å—Ç—É–ø—ã**: `padding: 12px`
- **–§–æ–∫—É—Å**: `border-color: #4ecdc4; box-shadow: 0 0 0 3px rgba(78, 205, 196, 0.1)`

### –í—ã–ø–∞–¥–∞—é—â–∏–µ —Å–ø–∏—Å–∫–∏ (.autocomplete-dropdown)
- **–§–æ–Ω**: `background: var(--panel)`
- **–ì—Ä–∞–Ω–∏—Ü–∞**: `border: 1px solid var(--panel-2)`
- **–†–∞–¥–∏—É—Å**: `border-radius: 8px`
- **–¢–µ–Ω—å**: `box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15)`
- **Z-index**: `1000`

### –≠–ª–µ–º–µ–Ω—Ç—ã –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è (.autocomplete-item)
- **–û—Ç—Å—Ç—É–ø—ã**: `padding: 8px 12px`
- **–ü–µ—Ä–µ—Ö–æ–¥**: `transition: background-color 0.2s ease`
- **Hover**: `background: var(--panel-2)`
- **–ì—Ä–∞–Ω–∏—Ü–∞**: `border-bottom: 1px solid var(--panel-2)`

---

## üéØ –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞

### –†–µ–¥–∞–∫—Ç–æ—Ä—ã –∏–¥–µ–π/–∑–∞–º–µ—Ç–æ–∫ (.idea-editor, .note-editor)
- **–§–æ–Ω**: `background: linear-gradient(135deg, var(--panel) 0%, #1a1a2e 100%)`
- **–ì—Ä–∞–Ω–∏—Ü–∞**: `border: 1px solid rgba(255, 255, 255, 0.1)`
- **–†–∞–¥–∏—É—Å**: `border-radius: 12px`
- **–¢–µ–Ω—å**: `box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3)`
- **–†–∞–∑–º–µ—Ä**: `max-width: 600px; width: 95%`

### –ó–∞–≥–æ–ª–æ–≤–∫–∏ –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω
- **–ò–¥–µ–∏**: `background: linear-gradient(135deg, #ff6b6b, #4ecdc4)`
- **–ó–∞–º–µ—Ç–∫–∏**: `background: linear-gradient(135deg, #8b7355, #a0a0a0)`
- **–°—Ç–∏–ª—å**: `-webkit-background-clip: text; -webkit-text-fill-color: transparent`
- **–†–∞–∑–º–µ—Ä**: `font-size: 1.5em; font-weight: bold`

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏ UI

### –ê–Ω–∏–º–∞—Ü–∏–∏ –∏ –ø–µ—Ä–µ—Ö–æ–¥—ã
- **–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥**: `transition: all 0.2s ease`
- **–ú–µ–¥–ª–µ–Ω–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥**: `transition: all 0.3s ease`
- **Hover —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏**: `transform: translateY(-1px)` –∏–ª–∏ `scale(1.1)`
- **–ê–∫—Ç–∏–≤–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è**: `transform: scale(0.95)`

### Z-index —Å–ª–æ–∏
- **–ê–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ**: `z-index: 1000`
- **–ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞**: `z-index: 1000+`
- **–¢—É–ª—Ç–∏–ø—ã**: `z-index: –≤—ã—Å–æ–∫–∏–π`

### –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å
- **–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —à–∏—Ä–∏–Ω–∞**: `min-width: 600px`
- **–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –≤—ã—Å–æ—Ç–∞**: `min-height: 100vh`
- **Flexbox**: –¥–ª—è –≥–∏–±–∫–æ–≥–æ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤
- **Grid**: –¥–ª—è –æ—Å–Ω–æ–≤–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

---

*–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: 17.01.2025*
*–í–µ—Ä—Å–∏—è: v0.3.9-fixed-click*

# Changelog

История версий (релизы) + дорожная карта (планы/идеи). Формат релизов: Atlas_of_life_vX.Y.Z. В UI версия берётся по первой секции `## Atlas_of_life_vX.Y.Z` сверху.

### Backlog / Plans / Ideas

- Undo при удалении задач (toast 5–10 сек).
- Drag&Drop сортировка и батч‑операции в «Сегодня».
- Двойной клик по проекту = Fit проект.
- RU‑парсер: «послезавтра 8:30», «через 1.5 часа», интервалы.
- IndexedDB (offline‑хранилище) + миграции схемы.
- Частичный экспорт/импорт (по доменам/проектам).
- Метрики продуктивности: время в статусе, aging‑heatmap.
- Эксперименты по раскладке: force‑layout / grid‑кольца.

---

## Atlas_of_life_v0.2.5 - 2025-09-04

Добавлено/изменено

- Новый алгоритм размещения задач внутри проектов: задачи группируются по кольцам, равномерно распределяются по окружности, что исключает пересечения.
- Динамический расчет радиусов проектов в зависимости от количества задач.
- Магнитное поведение при перетаскивании задачи внутрь проекта: задача примагничивается к краю круга.
- Возможность вытаскивать задачи из проекта с подтверждением пользователя.
- Исправлены синтаксические ошибки и дублирующиеся блоки кода, влияющие на отображение карты.

## Atlas_of_life_v0.2.4 - 2025-09-04 13:26

Добавлено/изменено

- Единая русская терминология в UI: легенда статусов в шапке — «план / сегодня / в работе / готово» (вместо backlog/today/doing/done).
- Переводы элементов в хедере: «Свечение» вместо Glow; «Подогнать домен/проект» вместо Fit.

## Atlas_of_life_v0.2.3 - 2025-09-04 13:20

Добавлено

- Сохранение пользовательских переключателей и вида: `Связи/Давность/Свечение` и активный `вид` (карта/сегодня) сохраняются в storage и восстанавливаются при запуске.
- Today/Inspector: отметка задач чекбоксом и «в Today» теперь сохраняются (добавлен saveState).

Изменено

- Удалены дубли CSS правил `.domenu`.
- Старые функции контекстного меню помечены как устаревшие (не используются), чтобы не мешать навигации в коде.

## Atlas_of_life_v0.2.2 - 2025-09-04 03:03

Добавлено

- Скрипт авто‑бампа версии: `tools/bump-version.ps1` — обновляет `CHANGELOG.md` и `js/app.js`.

Изменено

- Заголовок релиза содержит дату и время: `YYYY-MM-DD HH:mm`.
- Скрипт теперь вставляет НОВУЮ секцию релиза вверху, сохраняя историю (не перезаписывает предыдущую).

Добавлено

- CRUD доменов: создать, переименовать, изменить цвет (палитра), слить с…, удалить (перенос проектов / удаление вместе с задачами). Контекстное меню (⋯ / ПКМ).
- Fit/Focus: кнопки и хоткеи; двойной клик по домену — фокус.
- Кнопка «О версии»: модалка с номером версии и ссылкой на CHANGELOG; авто‑подхват версии из CHANGELOG.

Изменено

- Карта: зум к курсору, константная скорость панорамирования, единая матрица трансформации.
- Фильтры: домен/тег влияют на видимые узлы и рёбра.
- Размещение задач: «золотой угол», меньше наложений.
- Связи: адаптивная кривизна Безье (длинные — прямее).

Производительность

- Динамический cap рёбер + Glow с гистерезисом, FPS‑оверлей (Ctrl+Shift+F).

I18N/UX

- Очищены русские строки; улучшена читаемость ссылок в модалках.

Быстрый ввод

- RU‑парсер для #/@/~ p1..p4 и !сегодня/завтра/через N мин/ч, дни недели.

## Atlas_of_life_v0.2.1 - 2025-09-04 02:41

- Полировка доменов и навигации карты: мягкие подсказки при создании/переименовании, мгновенный пересчёт счётчиков, плавный Fit/Focus с ограничением масштаба, палитра цвета с немедленным применением, безопасное удаление/слияние доменов и тосты со сводкой переносов/удалений.

## Atlas_of_life_v0.1.0 — 2025‑08‑XX

Первый релиз (MVP)

- Карта, экран «Сегодня», экспорт/импорт JSON, демо‑данные.

## [Unreleased]

### Added
- Storage migrations and adapter layer.
- Light/dark theme via CSS variables and toggle.
- Local analytics (ring buffer in localStorage).
- Map: dbl-click project to fit bbox.
- Map: viewport culling of tasks/links.
- Inbox autocomplete (#/@), Today sorting + due badge, .ics export.

### Changed
- Throttled redraws on wheel/drag.
- Minor CSS variable refinements.

### Fixed
- Removed dead branches in map code.
- Reduced potential lag spikes on interactions.

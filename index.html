<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Атлас жизни v0.2.7</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
<div class="app">
  <header>
    <div class="brand">Атлас жизни v0.2.7</div>
    <div class="chip active" data-view="map">Карта</div>
    <div class="chip" data-view="today">Сегодня</div>
    <div class="chip" id="btnCenter" title="Центр (C)">Центр</div>
    <div class="chip" id="btnFitDomain" title="Подогнать домен (F)">Подогнать домен</div>
    <div class="chip" id="btnFitProject" title="Подогнать проект (P)">Подогнать проект</div>
    <div class="chip" id="btnReset" title="Сброс вида (R)">Сброс</div>
    <div class="spacer"></div>
    <div class="chip" id="btnFullscreen" title="Полный экран">Экран</div>
    <div class="toggle">
      <div class="legend">
        <span class="pill pill-backlog">план</span>
        <span class="pill pill-today">сегодня</span>
        <span class="pill pill-doing">в работе</span>
        <span class="pill pill-done">готово</span>
      </div>
  <label>Зум:<input id="zoomSlider" class="zoom-slider" type="range" min="50" max="220" step="1" value="100">

      <button class="chip" id="btnExport" title="Экспорт JSON">Экспорт</button>
      <label class="chip" for="fileImport" title="Импорт JSON">Импорт</label>
      <input id="fileImport" type="file" accept="application/json" class="hidden" />
      <label><input type="checkbox" id="tgLinks" checked/> Связи</label>
      <label><input type="checkbox" id="tgAging" checked/> Давность</label>
      <label><input type="checkbox" id="tgGlow" checked/> Свечение</label>
      <button class="chip" id="btnAbout" title="О версии">О версии</button>
    </div>
  </header>

  <main>
    <aside class="left">
      <div class="section"><h3>Домены</h3></div>
      <div class="domains" id="domainsList"></div>
      <div class="section"><h3>Фильтры</h3></div>
      <div class="filters" id="tagsList"></div>
      <div class="section">
        <div class="hint">Шорткаты для быстрого ввода: <span class="kbd">#тег</span> <span class="kbd">@проект</span> <span class="kbd">!сегодня 10:00</span> <span class="kbd">~30м</span></div>
      </div>
    </aside>

    <section id="canvasWrap">
      <canvas id="canvas"></canvas>
      <div class="tooltip" id="tooltip"></div>
      <div class="viewToday hidden" id="viewToday"></div>
    </section>

    <aside class="right">
      <div class="section"><h3>Инспектор</h3></div>
      <div class="inspector" id="inspector">
        <div class="hint">Выберите домен/проект/задачу на карте для подробностей.</div>
      </div>
    </aside>
  </main>

  <footer>
    <div class="input">
      <span>➕</span>
      <input id="quickAdd" autocomplete="off" placeholder="Быстро добавить: Написать план #дом @проект !сегодня 10:00 ~5м p2" />
      <div class="chips" id="qaChips"></div>
    </div>
    <div class="wip" id="wipInfo">WIP: 0 / 3</div>
  </footer>
</div>

<!-- simple modal -->
<div id="modal" class="modal">
  <div class="box">
    <div class="title" id="modalTitle">Диалог</div>
    <div class="body" id="modalBody"></div>
    <div class="buttons">
      <button class="btn" id="modalCancel">Отмена</button>
      <button class="btn primary" id="modalOk">Ок</button>
    </div>
  </div>
  <div class="backdrop"></div>
</div>

<!-- toast area -->
<div id="toast" class="toast"></div>

<script type="module" src="./js/app.js"></script>
<!-- Experiments system -->
<script src="addons/_experiments.js"></script>
<script src="addons/experiments/exp-2025-09-07-pulse-active-domain.js"></script>

<!-- Existing addons -->
<link rel="stylesheet" href="addons/addons.css">
<script src="addons/ics-export.js"></script>
<script src="addons/autocomplete.js"></script>
<script src="addons/today-plus.js"></script>
<script src="addons/inspector-plus.js"></script>

<link rel="stylesheet" href="addons/fix-ui.css">
<script src="addons/fixes-v0.2.6.js"></script>
</body>
</html>

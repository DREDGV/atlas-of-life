<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate, max-age=0" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />
  <meta name="cache-control" content="no-cache, no-store, must-revalidate, max-age=0" />
  <meta name="expires" content="0" />
  <meta name="pragma" content="no-cache" />
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />
  <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'%3E%3Ccircle cx='32' cy='32' r='28' fill='%2300d1b2'/%3E%3Ccircle cx='32' cy='32' r='12' fill='%23ffffff' opacity='0.9'/%3E%3C/svg%3E" />
    <title>Атлас жизни v0.5.5-checklist-debug</title>
    <link rel="stylesheet" href="styles.css?v=0.3.2-visual-restore&t=1757491261189&cache=bust" />
</head>
<body>
<div class="app">
  <header>
    <div class="brand">Атлас жизни <span class="version">v0.3.1-clamp-fix</span></div>
    <div class="chip active" data-view="map">Карта</div>
    <div class="chip" data-view="today">Сегодня</div>
    <div class="chip" id="btnCenter" title="Центр (C)">Центр</div>
    <div class="chip" id="btnFitDomain" title="Подогнать домен (F)">Подогнать домен</div>
    <div class="chip" id="btnFitProject" title="Подогнать проект (P)">Подогнать проект</div>
    <div class="chip" id="btnReset" title="Сброс вида (R)">Сброс</div>
    <div class="spacer"></div>
    <div class="search-container">
      <input type="text" id="searchInput" placeholder="Поиск по карте..." class="search-input" title="Поиск по названиям объектов (Ctrl+F)">
    </div>
    <div class="chip" id="btnFullscreen" title="Полный экран">Экран</div>
    <div class="toggle">
      <div class="legend">
        <span class="pill pill-backlog" title="Задачи в планах (backlog)">план</span>
        <span class="pill pill-today" title="Задачи на сегодня">сегодня</span>
        <span class="pill pill-doing" title="Задачи в работе">в работе</span>
        <span class="pill pill-done" title="Выполненные задачи">готово</span>
      </div>
  <label>Зум:<input id="zoomSlider" class="zoom-slider" type="range" min="50" max="220" step="1" value="100">

      <button class="chip" id="btnAbout" title="О версии">О версии</button>
      <div class="settings-dropdown">
        <button class="chip" id="btnSettings" title="Настройки">⚙️</button>
        <div class="settings-menu" id="settingsMenu">
          <div class="settings-item" data-action="hotkeys">⌨️ Горячие клавиши</div>
          <div class="settings-item" data-action="theme">🎨 Тема</div>
          <div class="settings-item" data-action="display">📱 Отображение</div>
          <div class="settings-item" data-action="hierarchy">🌐 Система иерархии</div>
          <div class="settings-item" data-action="export">💾 Экспорт/Импорт</div>
        </div>
      </div>
    </div>
  </header>

  <main>
    <aside class="left">
      <div class="creation-panel">
        <button class="create-btn" id="createTaskBtn" title="Создать задачу">
          <span class="icon">➕</span>
          <span class="text">Задача</span>
        </button>
        <button class="create-btn" id="createProjectBtn" title="Создать проект">
          <span class="icon">🎯</span>
          <span class="text">Проект</span>
        </button>
        <button class="create-btn" id="createIdeaBtn" title="Создать идею">
          <span class="icon">🌌</span>
          <span class="text">Идея</span>
        </button>
        <button class="create-btn" id="createNoteBtn" title="Создать заметку">
          <span class="icon">🪨</span>
          <span class="text">Заметка</span>
        </button>
        <button class="create-btn" id="createChecklistBtn" title="Создать чек-лист">
          <span class="icon">✓</span>
          <span class="text">Чек-лист</span>
        </button>
        <button class="create-btn" id="btnAddDomain" title="Создать домен">
          <span class="icon">🌍</span>
          <span class="text">Домен</span>
        </button>
      </div>
      
      <div class="domains" id="domainsList"></div>
      <div class="section"><h3>Фильтры</h3></div>
      <div class="filters" id="tagsList"></div>
      <div class="section">
        <div class="hint">Шорткаты: <span class="kbd">#тег</span> <span class="kbd">@проект</span> <span class="kbd">!сегодня 10:00</span> <span class="kbd">~30м</span> <span class="kbd">#идея название</span> <span class="kbd">#заметка название</span><br>Правый клик на карте для создания объектов</div>
      </div>
    </aside>

    <section id="canvasWrap">
      <canvas id="canvas"></canvas>
      <div class="tooltip" id="tooltip"></div>
      <div class="viewToday" id="viewToday" style="display: none;"></div>
    </section>

    <aside class="right">
      <div class="section"><h3>Инспектор</h3></div>
      <div class="inspector" id="inspector">
        <div class="hint">Выберите домен/проект/задачу на карте для подробностей.</div>
      </div>
    </aside>
  </main>

  <!-- Footer убран - функционал перенесен в левую панель -->
  
  <!-- Информационная панель внизу -->
  <div class="info-panel" id="infoPanel">
    <div class="info-content">
      <div class="info-icon">💡</div>
      <div class="info-text" id="infoText">Наведите курсор на объекты для получения подсказок</div>
    </div>
  </div>
</div>

<!-- simple modal -->
<div id="modal" class="modal">
  <div class="box">
    <div class="title" id="modalTitle">Диалог</div>
    <div class="body" id="modalBody"></div>
    <div class="buttons">
      <button class="btn" id="modalCancel">Отмена</button>
      <button class="btn primary" id="modalOk">Ок</button>
    </div>
  </div>
  <div class="backdrop"></div>
</div>

<!-- toast area -->
<div id="toast" class="toast"></div>

<!-- Контекстное меню для создания объектов -->
<div id="contextMenu" class="context-menu" style="display: none;">
  <div class="context-menu-item" data-action="create-task">
    <span class="icon">➕</span>
    <span class="text">Создать задачу</span>
  </div>
  <div class="context-menu-item" data-action="create-project">
    <span class="icon">🎯</span>
    <span class="text">Создать проект</span>
  </div>
  <div class="context-menu-item" data-action="create-idea">
    <span class="icon">🌌</span>
    <span class="text">Создать идею</span>
  </div>
  <div class="context-menu-item" data-action="create-note">
    <span class="icon">🪨</span>
    <span class="text">Создать заметку</span>
  </div>
  <div class="context-menu-item" data-action="create-checklist">
    <span class="icon">✓</span>
    <span class="text">Создать чек-лист</span>
  </div>
  <div class="context-menu-item" data-action="create-domain">
    <span class="icon">🌍</span>
    <span class="text">Создать домен</span>
  </div>
</div>

    <script>
      // Отладочная информация
      console.log("Atlas of Life loading...");
    </script>
    <script type="module" src="./js/app.js?v=0.5.5-checklist-debug&t=1757491261189&cache=bust&force=23"></script>
<!-- Experiments system -->
<script src="addons/_experiments.js"></script>
<script src="addons/experiments/exp-2025-09-07-pulse-active-domain.js"></script>

<!-- Hierarchy v2 modules are imported via state.js -->

<!-- Existing addons -->
<link rel="stylesheet" href="addons/addons.css">
<script src="addons/ics-export.js"></script>
<!-- <script src="addons/autocomplete.js"></script> --> <!-- Disabled: replaced with js/autocomplete.js -->
<script src="addons/inspector-plus.js"></script>

<!-- Disabled conflicting addons that override main styles -->
<!-- <link rel="stylesheet" href="addons/fix-ui.css"> -->
<!-- <script src="addons/fixes-v0.2.6.js"></script> -->

</body>
</html>





